"use strict";(self.webpackChunkvox_typescript=self.webpackChunkvox_typescript||[]).push([[140],{8140:function(e,n,s){s.r(n),s.d(n,{default:function(){return _}});var r=s(9439),t=s(6459),a=s(2791),i="ChatPage_container__MdG0m",u="ChatPage_messages__2EGBZ",c="ChatPage_user__jtwCz",l="ChatPage_authUser__p7UXO",o=s(2156),d=s(3400),v=s(1747),f=s(184),h=function(e){var n=e.wsChannel,s=(0,a.useState)(""),t=(0,r.Z)(s,2),i=t[0],u=t[1],c=(0,a.useState)("pending"),l=(0,r.Z)(c,2),h=l[0],m=l[1];(0,a.useEffect)((function(){var e=function(){m("fulfilled")};return null===n||void 0===n||n.addEventListener("open",e),function(){null===n||void 0===n||n.removeEventListener("open",e)}}),[n]);return(0,f.jsxs)("div",{className:"text-field-container",children:[(0,f.jsxs)("div",{children:[(0,f.jsx)(d.Z,{children:(0,f.jsx)(o.Z,{id:"clip"})}),(0,f.jsx)(v.Z,{placeholder:"Message",maxRows:"3",onChange:function(e){return u(e.currentTarget.value)},value:i})]}),(0,f.jsxs)("div",{children:[(0,f.jsx)(d.Z,{onClick:function(){""!==i&&" "!==i&&(null===n||void 0===n||n.send(i),u(""))},disabled:!n||"fulfilled"!==h,children:(0,f.jsx)(o.Z,{id:"send"})}),(0,f.jsx)(d.Z,{children:(0,f.jsx)(o.Z,{id:"image"})})]})]})},m=s(3433),x=s(3044),j=s(8055),p=s(8182),Z=s(4740),g=function(e){var n=e.message,s=(0,Z.C)((function(e){return e.profileReducer.authUser}));return(0,f.jsx)("div",{className:(null===s||void 0===s?void 0:s.userId)===n.userId?l:"",children:(0,f.jsxs)("div",{className:(0,p.Z)("user","user-container",c),children:[(0,f.jsx)(x.Z,{src:n.photo||j}),(0,f.jsxs)("div",{className:"about-user",children:[(0,f.jsx)("p",{className:"username",children:n.userName}),(0,f.jsx)("p",{className:"unique-name",children:n.message})]})]})})},C=function(e){var n=e.wsChannel,s=(0,a.useState)([]),t=(0,r.Z)(s,2),i=t[0],c=t[1],l=(0,a.useRef)(null);return(0,a.useEffect)((function(){l&&l.current&&l.current.scrollTo(0,l.current.scrollHeight);var e=function(e){var n=JSON.parse(e.data);c((function(e){return[].concat((0,m.Z)(e),(0,m.Z)(n))}))};return null===n||void 0===n||n.addEventListener("message",e),function(){null===n||void 0===n||n.removeEventListener("message",e)}}),[n,i]),(0,f.jsx)("div",{className:(0,p.Z)(u,"scrollbar"),ref:l,children:i.map((function(e,n){return(0,f.jsx)(g,{message:e},n)}))})},_=function(e){(0,t.Z)(e);var n=(0,a.useState)(null),s=(0,r.Z)(n,2),u=s[0],c=s[1];return(0,a.useEffect)((function(){var e,n=function(){setTimeout(s,3e3)};function s(){var s,r;null===(s=e)||void 0===s||s.removeEventListener("close",n),null===(r=e)||void 0===r||r.close(),(e=new WebSocket("wss://social-network.samuraijs.com/handlers/ChatHandler.ashx")).addEventListener("close",n),c(e)}return s(),function(){e.removeEventListener("close",n),e.close()}}),[]),(0,f.jsxs)("div",{className:(0,p.Z)("messenger-chat-container",i),children:[(0,f.jsx)(C,{wsChannel:u}),(0,f.jsx)(h,{wsChannel:u})]})}}}]);
//# sourceMappingURL=140.80d01a12.chunk.js.map